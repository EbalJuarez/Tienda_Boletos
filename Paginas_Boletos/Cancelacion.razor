@page "/cancelar"
@inject Blazored.LocalStorage.ISyncLocalStorageService localStorage
@using PaginaDeBoletos

<PageTitle>Pagina Cancelar</PageTitle>

<EditForm Model="@boleto" OnValidSubmit="@guardar">

    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="Contenedor-sesion">
        <div class="form-container">
            <p class="title">Cancelar compra</p>
            <div class="form">
                <div class="input-group">
                    <label for="nombre">Nombre:</label>
                    <InputText placeholder="" id="nombre" @bind-Value="boleto.Nombre" style="width: 100%; border-radius: 0.375rem; border: 1px solid rgba(55, 65, 81, 1); outline: 0; background-color: rgba(17, 24, 39, 1); padding: 0.75rem 1rem; color: rgba(243, 244, 246, 1);" />
                    <ValidationMessage For="() => boleto.Nombre" />
                </div>
                <div class="input-group">
                    <label for="dpi">DPI:</label>
                    <InputText placeholder="" id="dpi" @bind-Value="boleto.DPI" style="width: 100%; border-radius: 0.375rem; border: 1px solid rgba(55, 65, 81, 1); outline: 0; background-color: rgba(17, 24, 39, 1); padding: 0.75rem 1rem; color: rgba(243, 244, 246, 1);" />
                    <ValidationMessage For="() => boleto.DPI" />
                </div>
                <button style="margin-top:6%;" class="sign" type="submit">Cancelar</button>
            </div>
            <div class="social-message">
                <div class="line"></div>
                <p class="message">Ingrese los datos solicitados</p>
                <div class="line"></div>
            </div>
        </div>
    </div>
</EditForm>

@code {
    private int cantidadboletos = 0;
    private General boleto = new General();
    private List<General> Lista_Boletos_General = new List<General>();

    private void guardar()
    {
        Estadio.Asientos_General.Add(boleto);
        localStorage.SetItem("starships", Lista_Boletos_General);

    }

    protected override async Task OnInitializedAsync()
    {
        // Recuperar la lista de starships desde LocalStorage a una variable var
        var savedStarships = localStorage.GetItem<List<General>>("starships");

        // Validar si la lista fue recuperada correctamente, copiarla a la lista
        if (savedStarships != null)
        {
            Lista_Boletos_General = savedStarships;
        }
    }
}